# 存储开发概述

RaScript存储为开发者提供数据存储、数据管理能力，比如可以将联系人数据保存到数据库中，并进行数据管理。

#### 基本概念

* 数据存储：提供通用数据持久化能力，根据数据特点，分为DB存储、文件存储和SP存储。
* 数据管理：提供高效的数据管理能力，包括权限管理、数据备份、数据共享框架等。

在操作系统中，存在各种类型的数据，按数据结构可分为：

* 结构化数据：能够用统一的数据模型加以描述的数据。常见的是各类数据库数据。在应用开发中，对结构化数据的开发活动隶属于数据管理模块。
* 非结构化数据：指数据结构不规则或不完整，没有预定义的数据结构/模型，不方便用数据库二维逻辑表来表现的数据。常见的是各类文件，如文档、图片、音频、视频等。在应用开发中，对非结构化数据的开发活动隶属于文件管理模块。

在文件管理模块中，按文件所有者的不同可分为：

* 应用文件：文件所有者为应用，包括应用安装文件、应用资源文件、应用缓存文件等。
* 用户文件：文件所有者为登录到该终端设备的用户，包括用户私有的图片、视频、音频、文档等。
* 系统文件：与应用和用户无关的其他文件，包括公共库、设备文件、系统资源文件等。这类文件不需要开发者进行文件管理。

按文件系统管理的文件存储位置（数据源位置）的不同，有如下文件系统分类模型：

* 本地文件系统：提供本地设备或外置存储设备（如U盘、移动硬盘）的文件访问能力。
* 分布式文件系统：提供跨设备的文件访问能力。跨设备，指文件不一定存储在本地设备或外置存储设备，而是通过计算机网络与其他分布式设备相连。

#### 约束与限制

Android定义了以下与存储相关的权限：READ\_EXTERNAL\_STORAGE、WRITE\_EXTERNAL\_STORAGE和MANAGE\_EXTERNAL\_STORAGE。

在较低版本的Android系统中，应用需要声明READ\_EXTERNAL\_STORAGE权限才能访问位于外部存储空间中应用专属目录之外的任何文件。此外，应用需要声明WRITE\_EXTERNAL\_STORAGE权限才能向应用专属目录以外的任何文件写入数据。

Android系统的版本越新，就越依赖于文件的用途而不是位置来确定应用对特定文件的访问和写入能力。如果应用以Android 11（API级别30）或更高版本为目标平台，WRITE\_EXTERNAL\_STORAGE权限完全不会影响应用对存储的访问权限。这种基于用途的存储模型可增强用户隐私保护，因为应用只能访问其在设备文件系统中实际使用的区域。

Android 11引入了MANAGE\_EXTERNAL\_STORAGE权限，该权限提供对应用专属目录和MediaStore之外文件的写入权限。
